Rizz City – System Setup Summary
Last Updated: 2025-09-07 (rev. 1.5)

Purpose
This document explains the canonical project workflow and where project context is stored so ChatGPT (the assistant) can reliably access current scripts, history, and archives.

Primary principles
- GitHub is the single source of truth for all `.luau` script source code.
- Chat logs, design notes, and historical context live in the project folder (`docs/chat-logs/*.txt`) and are used for reasoning only (not as canonical code).
- The assistant must load SystemSetup.txt at the start of any chat and follow the procedures described.
- All raw code URLs are pinned to an immutable commit SHA for consistency and reproducibility.

Components
1) GitHub Repo (Live source of truth)
   - Repository: `Rhocwud/RizzCity` (private by default)
   - Canonical files:
     - `Explorer/` — directory mirroring Roblox Studio’s Explorer; contains all `.luau` files and preserves hierarchy
     - `docs/ProjectInventory.csv` — autogenerated, authoritative inventory CSV with:
         - Columns: `filename, repo_path, raw_repo_url, commit_sha, line_count, byte_size`
         - `raw_repo_url` points to `https://raw.githubusercontent.com/<owner>/<repo>/<commit_sha>/<repo_path>`
         - `line_count` is computed over the raw file bytes using wc semantics (count of `\n`)
   - NOTE: `docs/ProjectFileLinks.txt` and any Gist outputs are deprecated and no longer produced.

2) Local development / sync
   - Developer (Tyler) uses Roblox Studio → **Sync to Disk** to mirror the Studio Explorer to a local folder that is a Git repo working tree (the `Explorer/` folder).
   - Developer commits & pushes changes using GitHub Desktop / CLI. Pushing `main` updates the live repo.

3) Automation (inventory + raw access)
   - Canonical scheduled workflow:
     - `.github/workflows/publish-and-inventory.yml` — runs on schedule (recommended: every 30 minutes) or manual dispatch. Responsibilities:
       - Collects `.luau` files under `Explorer/`
       - Captures the source `commit_sha` (the HEAD used for generation)
       - Writes `docs/ProjectInventory.csv` with `filename, repo_path, raw_repo_url (pinned), commit_sha, line_count, byte_size`
       - Commits `docs/ProjectInventory.csv` back to the repo if changed (safe push policy: push to `main` if safe; otherwise open a PR)
     - No gist is created. No mapping text file is generated.
   - Token & secrets:
     - The automation uses a Personal Access Token stored as a repository Secret named `GH_PAT`.
     - Required scopes (minimum): `repo`. (`gist` scope is NOT required anymore.) Add `workflow` only if the token must dispatch other workflows.
     - **Do NOT paste tokens in chat.** The assistant will never request tokens in-chat and will instruct you to set the secret in GitHub settings.
   - Commit / PR behavior:
     - Workflow will attempt a safe direct push to `main` if the remote did not change since checkout.
     - If `main` advanced (diverged) while the run executed, the workflow will push to a new branch `projectinventory/update-<run_id>` and open a PR for manual review. This avoids CI attempting risky auto-merges/rebases.

4) Chat logs (Project Folder)
   - Stored in repo under `docs/chat-logs/` (files named `YYYYMMDD_topic.txt`).
   - Use these logs for historical reasoning and context only. Do NOT treat code snippets in chat logs as canonical source code.

How the assistant (ChatGPT) should behave at the start of a new chat
1. Load `SystemSetup.txt` from the repo root. This sets the rules, workflow names, and file locations.
2. Read `docs/ProjectInventory.csv` to discover current active code and pinned raw URLs.
   - Prefer `raw_repo_url` (pinned `raw.githubusercontent.com` to `commit_sha`) for all file fetches.
   - If `ProjectInventory.csv` is missing or a requested file row is absent, ask the developer to re-run the inventory workflow. **Do not request secrets in chat.**
3. When a specific file or lines are requested by the developer:
   - Fetch from the `raw_repo_url` in `ProjectInventory.csv` and return the requested lines with an exact citation to that raw URL and line numbers.
   - If a `raw_repo_url` 404s (e.g., force-push rewrote history), ask the developer to re-run the inventory workflow to regenerate a fresh CSV pinned to the new commit.
4. For code edits:
   - Provide patch diffs, complete replacement content, or Actions-ready workflow snippets.
   - When code must be committed, instruct the developer what to paste and where (which script type: ModuleScript, LocalScript, Server Script, etc.) and prefer creating PR-ready changes rather than pushing directly to main unless the developer has explicitly asked for direct push.
5. For system-history and design reasoning:
   - Consult `docs/chat-logs/*`, `Index.txt`, or `Project Changelog.txt`. Use these only for context and not as canonical code.

Notes & edge cases
- Non-code assets (Workspace parts, RemoteEvents, models) are not automatically exported. Developer should export these to `docs/exports/` or include instructions in `docs/` for the assistant to read.
- Newline / formatting:
  - `.gitattributes` at repo root should include `*.luau text eol=lf` to help enforce LF on commit.
  - The workflow does **not** normalize newlines; `line_count` (wc-style) will reveal collapse/mis-formatting immediately (e.g., suspiciously low counts). If needed, run a one-off normalization locally and commit.
- File locations (recommended)
  - `.github/workflows/publish-and-inventory.yml`
  - `docs/ProjectInventory.csv` (canonical inventory artifact)
  - `.gitattributes` (repo root)
- Security reminder:
  - Rotate `GH_PAT` regularly. Store it as `GH_PAT` in repo secrets. The assistant will never request or accept the token in chat.

Appendix — Helpful snippet
- Recommended `.gitattributes` (paste to repo root):
  *.luau text eol=lf
